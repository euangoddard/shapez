{"version":3,"sources":["shapes.ts","hsla.ts","manager.ts","utils.ts","main.ts"],"names":[],"mappings":";;;;;;ACOA,SAAA,iBAAA,CACE,CADF,EAEE,CAFF,EAGE,CAHF,EAIE,CAJF,EAIW;AAET,QAAI,IAAJ;AACA,ACdF,IAAA,IDcM,OCdN,QAAA,EDcuB,KAAK,GCd5B,CAAA,CDcuB,CAAW,CAAX,IAAgB,GAAjC,EAAsC,GAAtC,CAAJ;AACA,ACdF,IAAA,IDcM,KCdN,QAAA,IDcuB,ICdvB,CDc4B,ACd5B,KDcuB,CAAW,CAAX,IAAgB,GAAjC,EAAsC,GAAtC,CAAJ;AACA,ACbF,ACHA,IDGA,IDaM,CEhBN,IAAA,CDGA,ACFE,QADF,EAEE,CFcqB,ECbvB,GDa4B,EEhB5B,EAEgC,CFcT,CAAW,CAAX,ECbvB,EDauC,GAAjC,EAAsC,GAAtC,CAAJ;AAEA,ACZA,ACFA,QFcI,GEdG,EDEP,CDYU,CAAV,EAAa,AEdA,GDEb,CACU,GADV,EAEU,ACJH,CAAgB,IDEvB,EAGU,CCLH,CAAwB,IDE/B,ACFO,CAA6B,CDKZ,OCLjB,EAAuC,QAAvC,CAAP;AFeE,AGnBJ,AFOY,ACFX,ICLD,QHmBU,CCZE,GEPZ,AFOY,GAAA,CDYM,ECZN,EEPZ,CHmBuB,KAAL,CAAW,IGnB7B,CHmBkC,AGnBlC,KHmB6B,CAAW,MAAM,CAAjB,CAAX,CAAd;AACA,AGnBJ,AFOY,ACRZ,ICCA,IDDA,IAAA,CDQY,CEPZ,CHmBW,AEpBX,GDQY,CCRZ,EDQY,CEPZ,IFOY,KEPZ,CAAA;AHoBM,AGhBN,AFIY,IEJN,SFIM,EDYH,ICZG,CDWD,ECXC,MAAA,GEJqB;AHiB3B,AGhBJ,AFFiB,aEER,AFFQ,EDkBV,GGjBwB,EHetB,CChBQ,GAA0C,EAA1C;ADmBb,AGhBJ,AFGI,aEHK,EHgBF,KAHE;AAIL,AGnB2B,AFO/B,CEPF,WFOE,GDYO,MCZP,CAAA,WAAA,GAAA,UAAY,OAAZ,EAA6B,CAA7B,EAAwC,CAAxC,EAAiD;ADQxC,AGVX,AFGI,CEHH,QHUG,GCPM,CEHT,aFGuB,IAAI,IAAJ,GAAW,OAAX,EAApB;ADaD,AGfD,AFGE,KDIF,GGPM,GHeC,CCZC,KEHO,IFGE,KEHO,EFGP,WEHF,CAAuB,KFGrB,CAAkB,EEHpB,CAAf,WFGiD,GAAhC,EAAqC,GAArC,EAA0C,EAA1C,EAA8C,CAA9C,CAAf;ADaA,AGfF,AFGE,AFbJ,IAAM,IIUE,IHeE,ACZA,CFbK,CIUD,EHeA,IAAI,CGfG,EHeP,GAAU,ACZA,KDYK,AGff,CAAkB,GHeC,ACZT,CDYA,AGfV,CHeA,AGfZ,GHeoC,IAAI,CAAJ,CCZd,CAAY,CDYU,IAAI,CAA9C,CCZoB,CAAoB,CAApB,EAAuB,CAAvB,CAApB;ADaA,AGfF,AFGE,AFbF,QIUM,CJVD,EADQ,CC0BL,ACZA,IDYI,EGfI,EHeA,ACZA,CDYJ,CGfQ,EHeA,CAAlB,ICZc,GEHI,MFGJ,CEHA,AFGU,CEHE,GAAZ,EAAiB,AFGjB,CAAiB,KAAK,CEHE,EFGxB,EAA2B,MEH3B,AFGA,EEHoC,AFGD,OEHQ,IFG3C,CAAd,MEHc,CAAhB;AHgBE,AGdF,AFEE,AFbF,SAAK,IIWL,AFEO,EDYE,MCZP,CAAc,CEFhB,GAAA,CFEmB,OAAjB,IAA8B;ADa5B,AGdF,AFEE,AFhBS,CAAf,WIcU,GHcD,KCZK,CAAC,GDYG,CAAC,CGdK,AFEV,CADoB,MEDH,QHcI,CAAhB,CGdf,CHckC,CAAnB,EAAsB,IAAI,IAAI,CAA9B,IAAmC,GAApC,EAAyC,OAAzC,CAAiD,CAAjD,CAAT,EAA8D,EAA9D,CADE;AAEL,AGdF,AFEE,AFZN,IAAA,QIUU,GHcD,CDxBT,QCwBkB,CAAC,EGdM,EFEF,AFZvB,KIUgC,OHcG,ADxBnC,CCwBmB,EAAmB,CAAnB,AGdf,EHcqC,CAAtB,IAA2B,GAA5B,EAAiC,OAAjC,CAAyC,CAAzC,CAAT,EAAsD,EAAtD,CAFE;AAGL,AGdF,AFD8B,AFgBhC,SEhBE,IFgBF,ECDO,AGdE,OJeT,CACqB,CCFL,CAAC,CDCjB,CIfE,CAAoB,AJiBD,MAFrB,CIfE,CJkBmB,CIlBU,IHcE,CAAhB,EAAmB,ADCpC,CCDiB,CDKf,CCLqC,EGdI,EHcA,IAAI,CAA9B,CGdc,AJe/B,EIfE,AJmBwB,CCL0B,GAApC,EAAyC,OAAzC,CAAiD,CAAjD,CAAT,EAA8D,EAA9D,CAHE;AAIL,AGdF,AFED,AFaoB,KEtBrB,QFsBqB,ECDd,AGdE,CJeY,GAAA,GAAA,KIfnB,CAAoB,QAApB,EAA8B,aAAa,QAAb,EAA9B;AHUO,AGTP,AFGF,AFYqB,SCNnB,GCNF,CFYqB,GIfX,GJeW,EEZrB,CAAA,AFYqB,MAAA,IIfnB,AFGF,CEH2B,EFG3B,SEHE,CFGS,CEH6B,MFGxC,EAA4B,CAA5B,EAAuC,CEHrC,AFGF,EAAgD;ADY/C,AGdA,AFGO,AFYa,YEZb,CFYa,IEZb,IFYa,CEZb,EFYa,MEZb,CAAA,CFYa,IEZb,OAAA,CAAA;ADYR,AGdA,AFEQ,AFXA,WCuBD,AGdA,CFEG,CFXF,ECuBR,GDvBQ,GEWE,AFXM,CAAR,EEWE,GEFV,CAAwB,EFEhB,MEFR,EAAkC,UAAlC,EAA8C,wBAA9C;AHeD,AGdC,AFCQ,AFeN,YEfgB,CFeX,CAAL,GAAS,YAAY,CEfL,AFehB,GEfgB,eAAV;ADjBV,AGkBE,AFAE,AFeA,QCjCJ,GGkBS,CFAD,CAAC,AFeA,CAAL,GAAS,EEfT,EAAa,IDlBjB,EGkBE,CHlBF,AGmBI,CJcqB,CAArB,UIfF,EAEE,GHpBJ,OGoBK,KAAD,EAAkB;AHYtB,AGXM,AFFA,AFeF,SCFJ,IDES,MAAL,GAAc,GCFlB,CAA0B,MAA1B,EAA0C,ADEZ,KCF9B,CDEI,CCFmD;AACrD,AGXI,AFFD,AFeD,WCFK,EDEA,GIbH,EJaF,ECFc,AGXZ,CAAK,AJaM,ICFf,EGXe,MJaY,KAAzB,GIbE,EAA2B,UAAA,KAAA,EAAK;AHYrC,AGXO,AFDJ,AFcD,YEdO,QECM,MFDQ,KEChB,CAAoB,GFDJ,GECU,QFDV,CAAY,CEC5B,EAAsC,MAAM,GFD5B,CAAyB,CECzC,AFDgB,EECmC,AFDP,CAA5B,EAA+B,GECU,KAAzD,OFDgB,CAApB;ADcJ,AGZO,AFDH,AFfK,IC4BL,KGdE,GFCI,EFfD,MEeS,AFfT,EC4Ba,CD5BpB,EEeqB,MDanB,ACbc,EAAa,AFd3B,GADF,EEegB,AFbd,CEaiC,KFfnC,EC4BoB,ADzBlB,CCyB2B,CAAT,EAAoB,ACbxB,CDaI,ACblB,EDaiD,CAA/B,EAAwC,CD5B5D,EAG0B;AC0B1B,AGZG,AFDD,AFXA,KIKF,EAQE,CHWE,IAAI,ADxBF,CCwBN,EAAW,ACbF,EFXP,EEWA,CAAY,KAAZ,MENF;AHoBE,AGVF,AFHE,AFXA,WIcK,CJdD,CCwBC,ACbA,CDaL,MDxBA,CEWA,CAAc,KEGhB,AFHmB,CEIjB,MFJA,EAA4B,GEG9B,EAEE,UAAC,AFLD,GAA8C,EEK9C,EAAkB,OFLlB;ADcD,AGRG,AFLH,AFXC,KECF,OFDQ,cAAc,KAAK,MAAL,EAApB;ACyBF,AGRI,AFJJ,AFZE,QCwBE,IAAI,ACZR,AFZM,CCwBN,EAAW,CGRP,IAAA,CAAK,AFJT,CAAA,IFZoB,CIgBL,EJhBb,EAAuB,OEYzB,GEII,AFJJ,EEI+B,QFJd,EEIc,GFJ/B,EEI+B,AFJC,EEII,IFJpC,EAA8C;ADa5C,AGRI,AFJJ,AFZE,aCwBG,ACZA,CDYL,ICZA,EEIY,AJhBF,CEYG,KAAb,CFZE,GIgBE,CAAmB,MAAM,UAAzB,EAAqC,MAAM,KAA3C,EAAkD,MAAM,KAAxD;AHSL,AGRI,AFJH,AFZE,SIcA,IFFG,MAAL,GAAc,CFZD,IAAI,CEYjB,IFZsB,KAAL,CAAW,KAAK,MAAL,KAAgB,CAA3B,CAAf;ACyBJ,AGRG,AFJF,AFZE,KISH,AFAA,EEQE,CHOE,CD3BF,GC2BM,GDxBC,CCwBG,CAAZ,EAAe,YGff;AHgBE,AGLF,AFNA,AFbI,QImBA,IFNJ,GDWS,IAAI,CAAC,ADxBF,CEaZ,CEMkB,AFNlB,EDWkB,CAAL,EGLb,CJnBI,CCwBmB,ACXvB,CDWa,ECXb,CDW2B,CAAzB,UCXF;ADYC,AGLD,AFNE,AFbE,WImBG,EFNA,GAAL,CAAS,MFbI,GEab,CEMF,AFNqB,AFbF,CIoBjB,AFPA,EAAsB,CAAtB,CFbsB,CEaG,IFbR,CEaa,AFbF,CImB9B,EAEE,EFRA,AFbiC,EEaI,IFbT,CEac,CEQ1C,GJrB4C,CAA3B,CIqBjB,AFRA,AFbE,EIqBG;AHIP,AGHI,AJrBD,QCwBC,IAAI,IAAI,CAAZ,EAAe,GGHG,IAAd,aFRS,IAAE;ADYb,AGHE,AFRQ,AFbV,eCwBO,ADxBA,CCwBP,AGHU,AFRA,GFbC,KAAJ,CEaG,AFbO,EIqBf,CAAoB,AJrBf,CIqBgB,CAArB,AJrBoB,EIqBI,AFRhB,IFbH,EIqByB,AJrBF,EEapB,CAAA,EEQR,AFRQ,EEQ6B,AFR7B,CFbH,EAAiC,GIqBK,AFRnC,KEQR,GJrBK,CAAP;ACyBD,AGHE,AFRC,AFbH,KIgBD,AJhCO,EIsCL,SFTQ,eEGV,CFHuC,EAAnC;ADYJ,AGDA,AFVI,AFAJ,QCWI,GGDG,AJVP,CCWQ,IAAI,CAAZ,EAAe,ACXJ,MFAX,CEAI,AFAA,CIUJ,AFVmB,CEWjB,QJXE,CEAe,EEUnB,EAEE,CFZiB,EAAK,CFAxB,EAAI,IIYF,KAAA,EAAK,AJZP,EAAa;ACYX,AGCE,AFZE,YEYE,CJbR,ECYS,IAAI,CAAC,ECXF,CEYR,CHDc,CAAL,AGCQ,CFZf,EFDN,ECYwB,IAAI,CAAJ,GAAQ,CAAnB,IAAwB,CAAnC;AACD,AGCK,AFZA,AFDJ,mBAAO,CIaK,AFZJ,IFDI,EECE,GFDP,CIaH,CAAmB,CAAC,AJbJ,CIahB,EAAuB,AFZvB,CFDJ,CECyB,IEYQ,KAA7B,EAAoC,MAAM,KAA1C;AHAN,AGCK,AFZG,AFDP,SAFY,ECcN,CAAP,sBCXsB,IAAd,CAAmB,KAAnB;ADYT,AGCI,AFZI,CDNT,IGYE,EAOE,iBJjBW,OIUb;AAUA,AFfK,WEeE,EFpBH,cEoBJ,CACE,SADF,EAEE,YAAA;AAAM,AFhBJ,AFNS,KAAb,UIsBS,IFhBA,QAAL,CAAc,CEgBK,CFhBnB,EAAkB,EEgBd,IFhBJ,GAA2B,aAA3B;AEgByB,AFf1B,AFHH,KIgBA,EAGE,OJnBF,SAAA,CAAA,KAAA,EIgBA,CJhBA,UAAM,WAAN,EAA8B;AIsB9B,AJrBE,WIqBK,IJrBE,IAAI,KAAK,GIqBlB,CACE,CJtBO,CAAe,KAAK,GAApB,EIqBT,AJrBkC,EIuBhC,GJvBqC,MAA9B,EAAsC,CIuB7C,IJvBkD,QAA3C,EAAqD,WAArD,CAAP;AIuBM,AF/BN,AFSD,KAFD,QEPO,EE+BE,EF/BI,EAAX,IAAiB,KAAK,CE+BD,KAAf,EF/BN,EAA8B;AE+BH,AJpB7B,KIkBA,EAGE,OJrBF,MEXa,GFWb,CAAA,IAAA,GIkBA,AJlBA,YAAA;AIwBA,A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","file":"main.9f273d75.map","sourcesContent":["import { RGBAColour } from './hsla';\n\nconst RADIUS = {\n  MIN: 10,\n  MAX: 100,\n};\n\nexport abstract class PolyShape {\n  protected readonly x: number;\n  protected readonly y: number;\n  protected readonly radius: number;\n  protected readonly angle: number;\n  protected abstract klass: typeof Polygon | typeof Polystar;\n  private alpha = 1;\n\n  static random(\n    ctx: CanvasRenderingContext2D,\n    colour: RGBAColour,\n    coordinates: Coordinates,\n  ): Polygon | Polystar {\n    let shape: typeof Polygon | typeof Polystar;\n    let vertices: number;\n    const styleChoice = Math.random();\n    if (styleChoice < 0.5) {\n      shape = Polygon;\n      vertices = 3 + Math.round(Math.random() * 6);\n    } else {\n      shape = Polystar;\n      vertices = 4 + Math.round(Math.random() * 7);\n    }\n    return new shape(ctx, colour, vertices, coordinates);\n  }\n\n  constructor(\n    protected readonly ctx: CanvasRenderingContext2D,\n    protected readonly colour: RGBAColour,\n    protected readonly vertices: number,\n    coordinates: Coordinates,\n  ) {\n    this.x = coordinates.x;\n    this.y = coordinates.y;\n    this.radius = coordinates.radius;\n    this.angle = coordinates.angle;\n  }\n\n  get isVisible(): boolean {\n    return this.alpha > 0.01;\n  }\n\n  clone(coordinates: Coordinates): Polygon | Polystar {\n    return new this.klass(this.ctx, this.colour, this.vertices, coordinates);\n  }\n\n  draw(): void {\n    this.ctx.beginPath();\n    this.drawVertices();\n    this.ctx.fillStyle = this.fillStyle;\n    this.ctx.fill();\n\n    this.ctx.beginPath();\n    this.setStrokeStyles();\n    this.drawVertices();\n    this.ctx.closePath();\n    this.ctx.stroke();\n\n    this.fade();\n  }\n\n  private get fillStyle(): string {\n    const alpha = this.colour.a * this.alpha;\n    return `rgba(${this.colour.r}, ${this.colour.g}, ${\n      this.colour.b\n    } , ${alpha})`;\n  }\n\n  get isFadedOut(): boolean {\n    return this.alpha < 0.01;\n  }\n\n  private fade() {\n    this.alpha = this.alpha *= 0.85;\n  }\n\n  protected abstract drawVertices(): void;\n\n  private setStrokeStyles() {\n    this.ctx.strokeStyle = `rgba(255, 255, 255, ${this.alpha})`;\n    this.ctx.lineWidth = 3;\n    this.ctx.lineCap = 'round';\n  }\n}\n\nclass Polygon extends PolyShape {\n  protected readonly klass = Polygon;\n\n  protected drawVertices() {\n    var x, y, angle;\n    for (let i = 0; i < this.vertices; i += 1) {\n      angle = this.angle + 2 * Math.PI * i / this.vertices;\n      x = this.x + this.radius * Math.cos(angle);\n      y = this.y + this.radius * Math.sin(angle);\n\n      if (i === 0) {\n        this.ctx.moveTo(x, y);\n      } else {\n        this.ctx.lineTo(x, y);\n      }\n    }\n  }\n}\n\nclass Polystar extends PolyShape {\n  protected readonly klass = Polystar;\n\n  protected drawVertices(): void {\n    const points = this.vertices * 2;\n    let x: number;\n    let y: number;\n    let radius: number;\n    let angle: number;\n    for (let i = 0; i < points; i += 1) {\n      angle = this.angle + 2 * Math.PI * i / points;\n      if (i % 2) {\n        radius = 0.6 * this.radius;\n      } else {\n        radius = this.radius;\n      }\n\n      x = this.x + radius * Math.cos(angle);\n      y = this.y + radius * Math.sin(angle);\n\n      if (i === 0) {\n        this.ctx.moveTo(x, y);\n      } else {\n        this.ctx.lineTo(x, y);\n      }\n    }\n  }\n}\n\nexport class Coordinates {\n  static initial(x: number, y: number): Coordinates {\n    return new Coordinates(x, y, RADIUS.MIN, 0);\n  }\n\n  static fromPrevious(\n    x: number,\n    y: number,\n    previous: Coordinates,\n  ): Coordinates {\n    const deltaX = previous.x - x;\n    const deltaY = previous.y - y;\n    const deltaR = Math.sqrt(deltaX * deltaX + deltaY * deltaY);\n\n    const radius = Math.min(Math.max(deltaR, RADIUS.MIN), RADIUS.MAX);\n    const angle = Math.atan(deltaX / deltaY);\n    return new Coordinates(x, y, radius, angle);\n  }\n\n  constructor(\n    public x: number,\n    public y: number,\n    public radius: number,\n    public angle: number,\n  ) {}\n}\n","export interface RGBAColour {\n  r: number;\n  g: number;\n  b: number;\n  a: number;\n}\n\nexport function convertHSLAToRGBA(\n  h: number,\n  s: number,\n  l: number,\n  a: number,\n): RGBAColour {\n  let rgba: RGBAColour;\n  h = convertToPercent(Math.round(h) % 360, 360);\n  s = convertToPercent(Math.round(s) % 101, 100);\n  l = convertToPercent(Math.round(l) % 101, 100);\n\n  if (s === 0) {\n    const value = Math.round(Math.round(255 * l));\n    rgba = {\n      r: value,\n      g: value,\n      b: value,\n      a: a,\n    };\n  } else {\n    const q = l < 0.5 ? l * (1 + s) : l + s - l * s;\n    const p = 2 * l - q;\n    rgba = {\n      r: parseInt((convertHueToRGB(p, q, h + 1 / 3) * 256).toFixed(0), 10),\n      g: parseInt((convertHueToRGB(p, q, h) * 256).toFixed(0), 10),\n      b: parseInt((convertHueToRGB(p, q, h - 1 / 3) * 256).toFixed(0), 10),\n      a: a,\n    };\n  }\n  return rgba;\n}\n\nfunction convertToPercent(amount: number, limit: number): number {\n  return amount / limit;\n}\n\nvar convertHueToRGB = function(p: number, q: number, t: number): number {\n  if (t < 0) {\n    t += 1;\n  }\n  if (t > 1) {\n    t -= 1;\n  }\n  if (t < 1 / 6) {\n    return p + (q - p) * 6 * t;\n  }\n  if (t < 1 / 2) {\n    return q;\n  }\n  if (t < 2 / 3) {\n    return p + (q - p) * (2 / 3 - t) * 6;\n  }\n  return p;\n};\n","import { PolyShape, Coordinates } from './shapes';\nimport { convertHSLAToRGBA, RGBAColour } from './hsla';\n\nexport class Manager {\n  private readonly dataById: { [id: string]: ManagedItem } = {};\n\n  constructor(\n    private ctx: CanvasRenderingContext2D,\n    private width: number,\n    private height: number,\n  ) {}\n\n  addNewShape(shapeId: number, x: number, y: number): void {\n    const currentTime = new Date().getTime();\n    const colour = convertHSLAToRGBA(currentTime % 360, 100, 50, 1);\n    const coordinates = Coordinates.initial(x, y);\n    const shape = PolyShape.random(this.ctx, colour, coordinates);\n    this.dataById[`${shapeId}`] = {\n      shapes: [shape],\n      lastCoordinates: coordinates,\n    };\n  }\n\n  cloneShape(shapeId: number, x: number, y: number): void {\n    const { shapes, lastCoordinates } = this.dataById[`${shapeId}`];\n    if (!shapes) {\n      return;\n    }\n\n    const coordinates = Coordinates.fromPrevious(x, y, lastCoordinates);\n    const shape = last(shapes).clone(coordinates);\n    shapes.push(shape);\n    this.dataById[`${shapeId}`].lastCoordinates = coordinates;\n  }\n\n  updateScreenSize(width: number, height: number): void {\n    this.width = width;\n    this.height = height;\n  }\n\n  drawAll(): void {\n    this.ctx.clearRect(0, 0, this.width, this.height);\n    for (const id in this.dataById) {\n      const { shapes } = this.dataById[id];\n      const visibleShapes: PolyShape[] = [];\n      shapes.forEach(shape => {\n        shape.draw();\n        if (shape.isVisible) {\n          visibleShapes.push(shape);\n        }\n      });\n      this.dataById[id].shapes = visibleShapes;\n    }\n  }\n}\n\nexport interface ManagedItem {\n  shapes: PolyShape[];\n  lastCoordinates: Coordinates;\n}\n\nfunction last<T>(array: T[]): T {\n  return array[array.length - 1];\n}\n","export function iter<T>(\n  iterable: ArrayLike<T>,\n  callback: (element: T) => void,\n) {\n  return Array.prototype.forEach.call(iterable, callback);\n}\n","import { Manager } from './manager';\nimport { iter } from './utils';\nimport { PolyShape } from './shapes';\nimport { convertHSLAToRGBA, RGBAColour } from './hsla';\n\nconst PASSIVE_NO_CAPTURE_FLAGS = {\n  capture: false,\n  passive: true,\n};\n\n(function() {\n  const canvas = document.querySelector('canvas') as HTMLCanvasElement;\n  const ctx = canvas.getContext('2d') as CanvasRenderingContext2D;\n  const manager = new Manager(ctx, window.innerWidth, window.innerHeight);\n\n  function sizeCanvas() {\n    const windowWidth = window.innerWidth;\n    const windowHeight = window.innerHeight;\n    canvas.setAttribute('width', windowWidth.toString());\n    canvas.setAttribute('height', windowHeight.toString());\n    manager.updateScreenSize(windowWidth, windowHeight);\n  }\n  window.addEventListener('resize', sizeCanvas, PASSIVE_NO_CAPTURE_FLAGS);\n  sizeCanvas();\n\n  canvas.addEventListener(\n    'touchstart',\n    (event: TouchEvent) => {\n      // event.preventDefault();\n      iter(event.changedTouches, touch => {\n        manager.addNewShape(touch.identifier, touch.pageX, touch.pageY);\n      });\n    },\n    PASSIVE_NO_CAPTURE_FLAGS,\n  );\n  canvas.addEventListener(\n    'touchmove',\n    (event: TouchEvent) => {\n      // event.preventDefault();\n      iter(event.changedTouches, touch => {\n        manager.cloneShape(touch.identifier, touch.pageX, touch.pageY);\n      });\n    },\n    PASSIVE_NO_CAPTURE_FLAGS,\n  );\n\n  let isMouseDown = false;\n  canvas.addEventListener(\n    'mousedown',\n    event => {\n      isMouseDown = true;\n      manager.addNewShape(-1, event.pageX, event.pageY);\n    },\n    PASSIVE_NO_CAPTURE_FLAGS,\n  );\n  canvas.addEventListener(\n    'mousemove',\n    event => {\n      if (isMouseDown) {\n        manager.cloneShape(-1, event.pageX, event.pageY);\n      }\n    },\n    PASSIVE_NO_CAPTURE_FLAGS,\n  );\n\n  canvas.addEventListener(\n    'mouseup',\n    () => (isMouseDown = false),\n    PASSIVE_NO_CAPTURE_FLAGS,\n  );\n\n  canvas.addEventListener(\n    'mouseleave',\n    () => (isMouseDown = false),\n    PASSIVE_NO_CAPTURE_FLAGS,\n  );\n\n  function tick() {\n    requestAnimationFrame(() => {\n      tick();\n      manager.drawAll();\n    });\n  }\n  tick();\n})();\n"]}