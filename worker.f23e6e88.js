parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"j8I8":[function(require,module,exports) {
"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function e(e,n){return!n||"object"!==t(n)&&"function"!=typeof n?i(e):n}function i(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function n(t){return(n=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&o(t,e)}function o(t,e){return(o=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function u(t,e,i){return e&&a(t.prototype,e),i&&a(t,i),t}Object.defineProperty(exports,"__esModule",{value:!0});var c={MIN:10,MAX:100},h=function(){function t(e,i,n,r){s(this,t),this.ctx=e,this.colour=i,this.vertices=n,this.alpha=1,this.x=r.x,this.y=r.y,this.radius=r.radius,this.angle=r.angle}return u(t,[{key:"clone",value:function(t){return new this.klass(this.ctx,this.colour,this.vertices,t)}},{key:"draw",value:function(){this.ctx.beginPath(),this.drawVertices(),this.ctx.fillStyle=this.fillStyle,this.ctx.fill(),this.ctx.beginPath(),this.setStrokeStyles(),this.drawVertices(),this.ctx.closePath(),this.ctx.stroke(),this.fade()}},{key:"fade",value:function(){this.alpha=this.alpha*=.85}},{key:"setStrokeStyles",value:function(){this.ctx.strokeStyle="rgba(255, 255, 255, ".concat(this.alpha,")"),this.ctx.lineWidth=3,this.ctx.lineCap="round"}},{key:"isVisible",get:function(){return this.alpha>.01}},{key:"fillStyle",get:function(){var t=this.colour.a*this.alpha;return"rgba(".concat(this.colour.r,", ").concat(this.colour.g,", ").concat(this.colour.b," , ").concat(t,")")}},{key:"isFadedOut",get:function(){return this.alpha<.01}}],[{key:"random",value:function(t,e,i){var n,r;return Math.random()<.5?(n=l,r=3+Math.round(6*Math.random())):(n=f,r=4+Math.round(7*Math.random())),new n(t,e,r,i)}}]),t}();exports.PolyShape=h;var l=function(t){function i(){var t;return s(this,i),(t=e(this,n(i).apply(this,arguments))).klass=i,t}return r(i,h),u(i,[{key:"drawVertices",value:function(){for(var t,e,i,n=0;n<this.vertices;n+=1)i=this.angle+2*Math.PI*n/this.vertices,t=this.x+this.radius*Math.cos(i),e=this.y+this.radius*Math.sin(i),0===n?this.ctx.moveTo(t,e):this.ctx.lineTo(t,e)}}]),i}(),f=function(t){function i(){var t;return s(this,i),(t=e(this,n(i).apply(this,arguments))).klass=i,t}return r(i,h),u(i,[{key:"drawVertices",value:function(){for(var t,e,i,n,r=2*this.vertices,o=0;o<r;o+=1)n=this.angle+2*Math.PI*o/r,i=o%2?.6*this.radius:this.radius,t=this.x+i*Math.cos(n),e=this.y+i*Math.sin(n),0===o?this.ctx.moveTo(t,e):this.ctx.lineTo(t,e)}}]),i}(),y=function(){function t(e,i,n,r){s(this,t),this.x=e,this.y=i,this.radius=n,this.angle=r}return u(t,null,[{key:"initial",value:function(e,i){return new t(e,i,c.MIN,0)}},{key:"fromPrevious",value:function(e,i,n){var r=n.x-e,o=n.y-i,s=Math.sqrt(r*r+o*o);return new t(e,i,Math.min(Math.max(s,c.MIN),c.MAX),Math.atan(r/o))}}]),t}();exports.Coordinates=y;
},{}],"vhf5":[function(require,module,exports) {
"use strict";function r(r,n,o,a){var u;if(r=t(Math.round(r)%360,360),n=t(Math.round(n)%101,100),o=t(Math.round(o)%101,100),0===n){var d=Math.round(Math.round(255*o));u={r:d,g:d,b:d,a:a}}else{var i=o<.5?o*(1+n):o+n-o*n,s=2*o-i;u={r:parseInt((256*e(s,i,r+1/3)).toFixed(0),10),g:parseInt((256*e(s,i,r)).toFixed(0),10),b:parseInt((256*e(s,i,r-1/3)).toFixed(0),10),a:a}}return u}function t(r,t){return r/t}Object.defineProperty(exports,"__esModule",{value:!0}),exports.convertHSLAToRGBA=r;var e=function(r,t,e){return e<0&&(e+=1),e>1&&(e-=1),e<1/6?r+6*(t-r)*e:e<.5?t:e<2/3?r+(t-r)*(2/3-e)*6:r};
},{}],"RbsI":[function(require,module,exports) {
"use strict";function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e(t,e){for(var a=0;a<e.length;a++){var i=e[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function a(t,a,i){return a&&e(t.prototype,a),i&&e(t,i),t}Object.defineProperty(exports,"__esModule",{value:!0});var i=require("./shapes"),n=require("./hsla"),r=function(){function e(a,i,n){t(this,e),this.ctx=a,this.width=i,this.height=n,this.dataById={}}return a(e,[{key:"addNewShape",value:function(t,e,a){var r=(new Date).getTime(),o=n.convertHSLAToRGBA(r%360,100,50,1),s=i.Coordinates.initial(e,a),h=i.PolyShape.random(this.ctx,o,s);this.dataById["".concat(t)]={shapes:[h],lastCoordinates:s}}},{key:"cloneShape",value:function(t,e,a){var n=this.dataById["".concat(t)],r=n.shapes,s=n.lastCoordinates;if(r){var h=i.Coordinates.fromPrevious(e,a,s),c=o(r).clone(h);r.push(c),this.dataById["".concat(t)].lastCoordinates=h}}},{key:"updateScreenSize",value:function(t,e){this.width=t,this.height=e}},{key:"drawAll",value:function(){var t=this;this.ctx.clearRect(0,0,this.width,this.height);var e=function(e){var a=t.dataById[e].shapes,i=[];a.forEach(function(t){t.draw(),t.isVisible&&i.push(t)}),t.dataById[e].shapes=i};for(var a in this.dataById)e(a)}}]),e}();function o(t){return t[t.length-1]}exports.Manager=r;
},{"./shapes":"j8I8","./hsla":"vhf5"}],"Qe0x":[function(require,module,exports) {
"use strict";var e;Object.defineProperty(exports,"__esModule",{value:!0}),function(e){e[e.Init=0]="Init",e[e.UpdateSize=1]="UpdateSize",e[e.AddShape=2]="AddShape",e[e.CloneShape=3]="CloneShape"}(e=exports.WorkerMessageTypes||(exports.WorkerMessageTypes={}));
},{}],"ZXZ8":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e,a,r=require("./manager"),t=require("./message.types");function i(){requestAnimationFrame(function(){var e;i(),null===(e=a)||void 0===e||e.drawAll()})}onmessage=function(s){var n=s.data;switch(n.type){case t.WorkerMessageTypes.Init:var d=(e=n.canvas).getContext("2d");a=new r.Manager(d,n.width,n.height),i();break;case t.WorkerMessageTypes.UpdateSize:e.width=n.width,e.height=n.height,a.updateScreenSize(n.width,n.height);break;case t.WorkerMessageTypes.AddShape:a.addNewShape(n.identifier,n.x,n.y);break;case t.WorkerMessageTypes.CloneShape:a.cloneShape(n.identifier,n.x,n.y)}};
},{"./manager":"RbsI","./message.types":"Qe0x"}]},{},["ZXZ8"], null)
//# sourceMappingURL=/worker.f23e6e88.js.map