parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"j8I8":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Coordinates=exports.PolyShape=void 0;const t={MIN:10,MAX:100};class s{constructor(t,s,i,e){this.ctx=t,this.colour=s,this.vertices=i,this.alpha=1,this.x=e.x,this.y=e.y,this.radius=e.radius,this.angle=e.angle}static random(t,s,h){let a,r;return Math.random()<.5?(a=i,r=3+Math.round(6*Math.random())):(a=e,r=4+Math.round(7*Math.random())),new a(t,s,r,h)}get isVisible(){return this.alpha>.01}clone(t){return new this.klass(this.ctx,this.colour,this.vertices,t)}draw(){this.ctx.beginPath(),this.drawVertices(),this.ctx.fillStyle=this.fillStyle,this.ctx.fill(),this.ctx.beginPath(),this.setStrokeStyles(),this.drawVertices(),this.ctx.closePath(),this.ctx.stroke(),this.fade()}get fillStyle(){const t=this.colour.a*this.alpha;return"rgba(".concat(this.colour.r,", ").concat(this.colour.g,", ").concat(this.colour.b," , ").concat(t,")")}get isFadedOut(){return this.alpha<.01}fade(){this.alpha=this.alpha*=.9}setStrokeStyles(){this.ctx.strokeStyle="rgba(255, 255, 255, ".concat(this.alpha,")"),this.ctx.lineWidth=3,this.ctx.lineCap="round"}}exports.PolyShape=s;class i extends s{constructor(){super(...arguments),this.klass=i}drawVertices(){var t,s,i;for(let e=0;e<this.vertices;e+=1)i=this.angle+2*Math.PI*e/this.vertices,t=this.x+this.radius*Math.cos(i),s=this.y+this.radius*Math.sin(i),0===e?this.ctx.moveTo(t,s):this.ctx.lineTo(t,s)}}class e extends s{constructor(){super(...arguments),this.klass=e}drawVertices(){const t=2*this.vertices;let s,i,e,h;for(let a=0;a<t;a+=1)h=this.angle+2*Math.PI*a/t,e=a%2?.6*this.radius:this.radius,s=this.x+e*Math.cos(h),i=this.y+e*Math.sin(h),0===a?this.ctx.moveTo(s,i):this.ctx.lineTo(s,i)}}class h{constructor(t,s,i,e){this.x=t,this.y=s,this.radius=i,this.angle=e}static initial(s,i){return new h(s,i,t.MIN,0)}static fromPrevious(s,i,e){const a=e.x-s,r=e.y-i,o=Math.sqrt(a*a+r*r),c=Math.min(Math.max(o,t.MIN),t.MAX),l=Math.atan(a/r);return new h(s,i,c,l)}}exports.Coordinates=h;
},{}],"vhf5":[function(require,module,exports) {
"use strict";function t(t,n,o,u){let a;if(t=e(Math.round(t)%360,360),n=e(Math.round(n)%101,100),o=e(Math.round(o)%101,100),0===n){const t=Math.round(Math.round(255*o));a={r:t,g:t,b:t,a:u}}else{const e=o<.5?o*(1+n):o+n-o*n,s=2*o-e;a={r:parseInt((256*r(s,e,t+1/3)).toFixed(0),10),g:parseInt((256*r(s,e,t)).toFixed(0),10),b:parseInt((256*r(s,e,t-1/3)).toFixed(0),10),a:u}}return a}function e(t,e){return t/e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.convertHSLAToRGBA=t;var r=function(t,e,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?t+6*(e-t)*r:r<.5?e:r<2/3?t+(e-t)*(2/3-r)*6:t};
},{}],"RbsI":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Manager=void 0;var t=require("./shapes"),s=require("./hsla");class e{constructor(t,s,e){this.ctx=t,this.width=s,this.height=e,this.dataById={}}addNewShape(e,a,i){const h=(new Date).getTime(),o=(0,s.convertHSLAToRGBA)(h%360,100,50,1),r=t.Coordinates.initial(a,i),d=t.PolyShape.random(this.ctx,o,r);this.dataById["".concat(e)]={shapes:[d],lastCoordinates:r}}cloneShape(s,e,i){const{shapes:h,lastCoordinates:o}=this.dataById["".concat(s)];if(!h)return;const r=t.Coordinates.fromPrevious(e,i,o),d=a(h).clone(r);h.push(d),this.dataById["".concat(s)].lastCoordinates=r}updateScreenSize(t,s){this.width=t,this.height=s}drawAll(){this.ctx.clearRect(0,0,this.width,this.height);for(const t in this.dataById){const{shapes:s}=this.dataById[t],e=[];s.forEach(t=>{t.draw(),t.isVisible&&e.push(t)}),this.dataById[t].shapes=e}}}function a(t){return t[t.length-1]}exports.Manager=e;
},{"./shapes":"j8I8","./hsla":"vhf5"}],"Qe0x":[function(require,module,exports) {
"use strict";var e;Object.defineProperty(exports,"__esModule",{value:!0}),exports.WorkerMessageTypes=void 0,exports.WorkerMessageTypes=e,function(e){e[e.Init=0]="Init",e[e.UpdateSize=1]="UpdateSize",e[e.AddShape=2]="AddShape",e[e.CloneShape=3]="CloneShape"}(e||(exports.WorkerMessageTypes=e={}));
},{}],"ZXZ8":[function(require,module,exports) {
"use strict";var e=require("./manager"),a=require("./message.types");let t,s;function i(){requestAnimationFrame(()=>{var e;i(),null===(e=s)||void 0===e||e.drawAll()})}onmessage=function(r){const n=r.data;switch(n.type){case a.WorkerMessageTypes.Init:const r=(t=n.canvas).getContext("2d");s=new e.Manager(r,n.width,n.height),i();break;case a.WorkerMessageTypes.UpdateSize:t.width=n.width,t.height=n.height,s.updateScreenSize(n.width,n.height);break;case a.WorkerMessageTypes.AddShape:s.addNewShape(n.identifier,n.x,n.y);break;case a.WorkerMessageTypes.CloneShape:s.cloneShape(n.identifier,n.x,n.y)}};
},{"./manager":"RbsI","./message.types":"Qe0x"}]},{},["ZXZ8"], null)
//# sourceMappingURL=/worker.bd51d5ea.js.map